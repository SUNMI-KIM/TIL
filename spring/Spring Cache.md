# Spring Cache


백엔드 프로젝트 개발 중, 좋아요 수 조회 시 캐시를 적용하면 성능이 올라간다는 게시글들을 보고 나도 따라 도전하기로 했다. 

# Cache



데이터를 저장하여 나중에 해당 데이터에 대한 요청을 더 빠르게 처리할 수 있는 저장소이다.


- cache hit : 캐시 스토어(redis)에 데이터가 있을 경우 바로 가져온다.
- cache miss : 캐시 스토어(redis)에 데이터가 없을 경우, DB에서 데이터를 조회해야 한다.

캐시 기능을 도입하면 **성능을 크게 향상**시킬 수 있지만, 그로 인해 **데이터 정합성 문제**가 발생할 수 있다. 이 문제를 방지하려면 **캐시 쓰기 및 읽기 전략**을 적절히 도입해야 한다.

## 캐시 쓰기 전략


### Write-Back

캐시에 먼저 저장하고 일정 주기 스케줄링 작업(배치 작업)을 통해 데이터베이스에 저장하는 전략이다.

### Write-Through

저장할 데이터를 캐시에 먼저 저장 후 캐시에서 데이터베이스로 저장하는 전략이다. 

### Write-Around

모든 데이터를 데이터베이스에 저장하는 전략이다. 캐시엔 저장하지 않는다. 나중에 읽기를 시도할때 cache miss 라면 cache를 갱신한다. 

## 캐시 읽기 전략



### Read Through

캐시에서만 데이터를 읽어오는 전략이다. 

### Look Aside

데이터를 찾을때 우선 캐시에 저장된 데이터가 있는지 우선적으로 확인하는 전략이다.

💡 cache miss가 났을때 서버에서 DB를 바로 조회하면 Look Aside 패턴, 캐시에서 DB를 조회 후 다시 서버에 전달하는 방식이라면 Read Through 패턴이다.

## 프로젝트 캐시 전략


처음에는 Write-Around 전략을 사용하여 좋아요 수 조회와 쓰기 성능을 개선하려 했으나, 좋아요 수는 데이터 정합성이 매우 중요한 요소라고 판단했다.

따라서, 캐시와 데이터베이스 간의 일관성을 보장하는 것이 필요하다고 생각하여 쓰기 작업에서는 캐시를 사용하지 않기로 했다.

캐시를 통한 성능 개선은 조회에만 적용하기로 했다.

